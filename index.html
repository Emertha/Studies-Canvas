<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Title of the document</title>
</head>

<body>
    Jaśniej<input type="range" id ="jasnosc" min="-10" max="10" step="1">Ciemniej</br>
    Kontrast<input type="range" id ="kontrast" min="-10" max="10" step="1">Normalne</br>
    Żywe kolory<input type="range" id ="nasycenie" min="-10" max="10" step="1">Wyszarzałe</br>
    Rozmyte<input type="range" id ="rozmycie" min="-10" max="10" step="1">Ostre</br>


    <input type="file" name="" id="grafika">
    <button id="run">Test</button></br>
    <canvas width="600" height="400" id="plotno">
    
    <script>
        let plik = document.querySelector('#grafika')
        let plotno = document.querySelector('#plotno')
        let btnRun = document.querySelector('#run')
        let suwakJasnosc = document.querySelector('#jasnosc')
        

        const zdjecie = "./foto.jpg"
        let ctx = plotno.getContext('2d')  

        let img = new Image() 
        img.src = zdjecie
        img.addEventListener('load', (e) => {
            ctx.drawImage(img, 0, 0, plotno.width, plotno.height)
        })
//do testów
        btnRun.addEventListener('click', (e) => {
            let imageData = ctx.getImageData(0, 0, plotno.width, plotno.height)
            console.log(imageData)

            for(let i=0; i<imageData.data.length; i+=4){
                imageData.data[i] = Math.min(255, imageData.data[i] + 30) 
                imageData.data[i+1] = Math.min(255, imageData.data[i+1] + 30) 
                imageData.data[i+2] = Math.min(255, imageData.data[i+2] + 30) 
            }
            ctx.putImageData(imageData, 0, 0)
        })

        suwakJasnosc.addEventListener("input", function() {
            let imageData = ctx.getImageData(0, 0, plotno.width, plotno.height)
            console.log(imageData)
            if (jasnosc.value > 0){

            for(let i=0; i<imageData.data.length; i+=4){
                imageData.data[i] = Math.min(255, imageData.data[i] + 10) 
                imageData.data[i+1] = Math.min(255, imageData.data[i+1] + 10) 
                imageData.data[i+2] = Math.min(255, imageData.data[i+2] + 10) 
            }
            ctx.putImageData(imageData, 0, 0) 
            }
            else {
                for(let i=0; i<imageData.data.length; i+=4){
                imageData.data[i] = Math.min(255, imageData.data[i] - 10) 
                imageData.data[i+1] = Math.min(255, imageData.data[i+1] - 10) 
                imageData.data[i+2] = Math.min(255, imageData.data[i+2] - 10) 
            }
            ctx.putImageData(imageData, 0, 0) 
            }
            })
        

    </script>
    
</body>

</html>
